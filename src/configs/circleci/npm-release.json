{
  "target": ".circleci/config.yml",
  "strategy": "overwrite",
  "snippets": [
    {
      "name": "00-base",
      "variables": {}
    },
    {
      "name": "01-gally-create-staging-pr",
      "variables": {
        "jobName": "gally-create-pr",
        "dockerImage": "circleci/node:10",
        "ciEnvBranchName": "$CIRCLE_BRANCH"
      }
    },
    {
      "name": "02-run-yarn-tests",
      "variables": {
        "jobName": "test-node-v10",
        "dockerImage": "circleci/node:10",
        "jobOptions": {
          "requires": [
            "gally-create-pr"
          ]
        }
      }
    },
    {
      "name": "03-inject-coveralls-step",
      "variables": {
        "jobName": "test-node-v10",
        "ciEnvBranchName": "CIRCLE_BRANCH"
      }
    },
    {
      "name": "02-run-yarn-tests",
      "variables": {
        "jobName": "test-node-v8.10",
        "dockerImage": "circleci/node:8.10",
        "jobOptions": {
          "requires": [
            "gally-create-pr"
          ]
        }
      }
    },
    {
      "name": "04-dependabot-auto-merge",
      "variables": {
        "jobName": "gally-auto-merge",
        "dockerImage": "circleci/node:10",
        "jobOptions": {
          "requires": [
            "gally-create-pr",
            "test-node-v10",
            "test-node-v8.10"
          ],
          "filters": {
            "branches": {
              "only": "/dependabot\\/.*/"
            }
          }
        }
      }
    },
    {
      "name": "05-semantic-release",
      "variables": {
        "jobName": "release",
        "dockerImage": "circleci/node:10",
        "jobOptions": {
          "requires": [
            "gally-create-pr",
            "test-node-v10",
            "test-node-v8.10"
          ],
          "filters": {
            "branches": {
              "only": "master"
            }
          }
        }
      }
    }
  ],
  "variables": {}
}
